{% extends "base_sidebar.html" %}

{% block title %}My Profile - {{ tenant.company_name }}{% endblock %}
{% block page_title %}üë§ My Profile{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">Profile Settings</h2>
        <span style="color: #7f8c8d; font-size: 14px;">Manage your account and company details</span>
    </div>
    
    <form method="POST" style="max-width: 900px;">
        <!-- Personal Information -->
        <div style="background: linear-gradient(135deg, #667eea22 0%, #764ba222 100%); padding: 15px 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="margin: 0; font-size: 18px; color: #2c3e50;">
                üë§ Personal Information
            </h3>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label>Full Name *</label>
                <input type="text" name="admin_name" value="{{ tenant.admin_name }}" required>
            </div>
            
            <div class="form-group">
                <label>Email Address *</label>
                <input type="email" name="admin_email" value="{{ tenant.admin_email }}" required>
                <small style="color: #7f8c8d; font-size: 12px;">Used for login and notifications</small>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label>Phone Number</label>
                <input type="tel" name="admin_phone" value="{{ tenant.admin_phone or '' }}" placeholder="+91 98765 43210">
            </div>
            
            <div class="form-group">
                <label>Subdomain</label>
                <input type="text" value="{{ tenant.subdomain }}" disabled style="background: #f5f7fa; cursor: not-allowed;">
                <small style="color: #7f8c8d; font-size: 12px;">Cannot be changed</small>
            </div>
        </div>
        
        <!-- Company Information -->
        <div style="background: linear-gradient(135deg, #667eea22 0%, #764ba222 100%); padding: 15px 20px; border-radius: 8px; margin: 30px 0 25px;">
            <h3 style="margin: 0; font-size: 18px; color: #2c3e50;">
                üè¢ Company Information
            </h3>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label>Company Name *</label>
                <input type="text" name="company_name" value="{{ tenant.company_name }}" required>
            </div>
            
            <div class="form-group">
                <label>GSTIN (Optional)</label>
                <input type="text" name="gstin" value="{{ tenant.gstin or '' }}" placeholder="22AAAAA0000A1Z5" maxlength="15" style="text-transform: uppercase;">
            </div>
        </div>
        
        <div class="form-group">
            <label>Company Address</label>
            <textarea name="company_address" rows="3" placeholder="Enter full address with city, state, and PIN code">{{ company_address }}</textarea>
        </div>
        
        <div class="form-group">
            <label>Company Phone</label>
            <input type="tel" name="company_phone" value="{{ company_phone }}" placeholder="+91 12345 67890">
            <small style="color: #7f8c8d; font-size: 12px;">Shown on invoices and documents</small>
        </div>
        
        <!-- Change Password -->
        <div style="background: linear-gradient(135deg, #667eea22 0%, #764ba222 100%); padding: 15px 20px; border-radius: 8px; margin: 30px 0 25px;">
            <h3 style="margin: 0; font-size: 18px; color: #2c3e50;">
                üîê Change Password
            </h3>
            <p style="margin: 5px 0 0; font-size: 13px; color: #7f8c8d;">Leave blank if you don't want to change your password</p>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label>Current Password</label>
                <input type="password" name="current_password" placeholder="Enter current password">
            </div>
            
            <div class="form-group">
                <label>New Password</label>
                <input type="password" name="new_password" placeholder="At least 6 characters">
            </div>
        </div>
        
        <div class="form-group">
            <label>Confirm New Password</label>
            <input type="password" name="confirm_password" placeholder="Re-enter new password">
        </div>
        
        <!-- Action Buttons -->
        <div style="display: flex; gap: 15px; margin-top: 30px; padding-top: 25px; border-top: 2px solid #f5f7fa;">
            <button type="submit" class="btn btn-primary" style="padding: 12px 30px;">
                üíæ Save Changes
            </button>
            <a href="{{ url_for('admin.dashboard') }}" class="btn btn-secondary" style="padding: 12px 30px;">
                ‚ùå Cancel
            </a>
        </div>
    </form>
</div>

<!-- Account Information (Read-only) -->
<div class="card" style="margin-top: 25px;">
    <div class="card-header">
        <h3 class="card-title">üìä Account Information</h3>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div style="padding: 15px; background: #f8f9fa; border-radius: 6px;">
            <div style="font-size: 12px; color: #7f8c8d; margin-bottom: 5px;">Created On</div>
            <div style="font-size: 16px; font-weight: 600; color: #2c3e50;">
                {{ tenant.created_at.strftime('%d %b %Y') if tenant.created_at else 'N/A' }}
            </div>
        </div>
        
        <div style="padding: 15px; background: #f8f9fa; border-radius: 6px;">
            <div style="font-size: 12px; color: #7f8c8d; margin-bottom: 5px;">Last Login</div>
            <div style="font-size: 16px; font-weight: 600; color: #2c3e50;">
                {{ tenant.last_login_at.strftime('%d %b %Y, %I:%M %p') if tenant.last_login_at else 'N/A' }}
            </div>
        </div>
        
        <div style="padding: 15px; background: #f8f9fa; border-radius: 6px;">
            <div style="font-size: 12px; color: #7f8c8d; margin-bottom: 5px;">Account Status</div>
            <div style="font-size: 16px; font-weight: 600;">
                {% if tenant.email_verified %}
                <span style="color: #28a745;">‚úÖ Verified</span>
                {% else %}
                <span style="color: #e74c3c;">‚ö†Ô∏è Not Verified</span>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
    /* Make form inputs larger for better UX */
    .form-group input,
    .form-group textarea,
    .form-group select {
        font-size: 15px;
        padding: 12px 15px;
    }
    
    /* Better focus states */
    .form-group input:focus,
    .form-group textarea:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    /* Required field indicator */
    .form-group label::after {
        content: none;
    }
    
    .form-group label:has(+ input[required])::after {
        content: " *";
        color: #e74c3c;
    }
</style>
{% endblock %}

