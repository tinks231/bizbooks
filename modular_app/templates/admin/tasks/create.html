{% extends 'base_sidebar.html' %}

{% block title %}Create Task - {{ tenant.company_name }}{% endblock %}

{% block page_title %}Create New Task{% endblock %}

{% block header_actions %}
<a href="{{ url_for('tasks.index') }}" class="btn btn-secondary">
    ‚Üê Back to Tasks
</a>
{% endblock %}

{% block content %}

<form method="POST" action="{{ url_for('tasks.create') }}">
    
    <!-- Task Details Card -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Task Details</h3>
        </div>
        
        <div class="form-row">
            <div class="form-group form-group--full">
                <label class="field-label field-label--required" for="title">Task Title</label>
                <input type="text" id="title" name="title" 
                       placeholder="e.g., Install electrical wiring in Room 101" required>
                <small class="help-text">Clear, descriptive title</small>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group form-group--full">
                <label class="field-label" for="description">Description</label>
                <textarea id="description" name="description" rows="4" 
                          placeholder="Detailed task description, requirements, specifications..."></textarea>
                <small class="help-text">Add any important details or instructions</small>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label class="field-label field-label--required" for="priority">Priority</label>
                <select id="priority" name="priority" required>
                    <option value="low">Low Priority</option>
                    <option value="medium" selected>Medium Priority</option>
                    <option value="high">üî• High Priority</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="field-label field-label--required" for="assigned_to">Assign To</label>
                <select id="assigned_to" name="assigned_to" required>
                    <option value="">Select Employee</option>
                    {% for employee in employees %}
                    <option value="{{ employee.id }}">{{ employee.name }} - {{ employee.phone }}</option>
                    {% endfor %}
                </select>
                <small class="help-text">Employee will receive email notification</small>
            </div>
        </div>
    </div>
    
    <!-- Location & Timeline Card -->
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Location & Timeline</h3>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label class="field-label" for="site_id">Site/Location</label>
                <select id="site_id" name="site_id">
                    <option value="">No specific site</option>
                    {% for site in sites %}
                    <option value="{{ site.id }}">{{ site.name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label class="field-label" for="start_date">Start Date</label>
                <input type="date" id="start_date" name="start_date" value="{{ today }}">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label class="field-label" for="deadline">Deadline</label>
                <input type="date" id="deadline" name="deadline">
                <small class="help-text">Optional - Set a deadline for this task</small>
            </div>
            <div class="form-group">
                <!-- Empty placeholder for alignment -->
            </div>
        </div>
    </div>
    
    <!-- Submit Button -->
    <div class="form-actions" style="margin-bottom: 30px;">
        <button type="submit" class="btn btn-primary" style="flex: 1;">
            ‚úÖ Create & Assign Task
        </button>
        <a href="{{ url_for('tasks.index') }}" class="btn btn-secondary" style="flex: 1;">
            Cancel
        </a>
    </div>
    
</form>

<!-- Help Section -->
<div class="card" style="background: #f8f9fa; border-left: 4px solid #3498db;">
    <h4 style="margin-bottom: 15px; color: #2c3e50;">üí° Task Management Tips</h4>
    
    <div style="margin-bottom: 15px;">
        <strong>Priority Levels:</strong>
        <p style="margin: 5px 0; color: #666;">
            üî• <strong>High:</strong> Urgent tasks, critical work<br>
            ‚ö†Ô∏è <strong>Medium:</strong> Important but not urgent<br>
            üìå <strong>Low:</strong> Can be done when time permits
        </p>
    </div>
    
    <div style="margin-bottom: 15px;">
        <strong>Email Notifications:</strong>
        <p style="margin: 5px 0; color: #666;">
            Employee will receive an email with task details and login link.
            Make sure employee email is configured!
        </p>
    </div>
    
    <div>
        <strong>Employee Updates:</strong>
        <p style="margin: 5px 0; color: #666;">
            Employees can login with their PIN to:
            ‚Ä¢ Update task status
            ‚Ä¢ Add progress notes
            ‚Ä¢ Upload photos/videos
            ‚Ä¢ Track materials used
        </p>
    </div>
</div>

{% endblock %}
