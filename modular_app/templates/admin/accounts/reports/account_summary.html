{% extends "base_sidebar.html" %}

{% block title %}Account Summary{% endblock %}

{% block page_title %}üí∞ Account Summary{% endblock %}

{% block header_actions %}
<button onclick="window.print()" class="btn btn-secondary">
    üñ®Ô∏è Print
</button>
{% endblock %}

{% block content %}

<div class="container-fluid" style="padding: 30px;">
    
    <!-- Report Header -->
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px; padding: 25px; margin-bottom: 25px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
        <h2 style="margin: 0 0 10px 0; font-size: 24px;">üí∞ Account Summary & Balance Sheet</h2>
        <div style="font-size: 14px; opacity: 0.9;">
            Overview of all accounts and current balances
        </div>
    </div>

    <!-- Summary Cards -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 25px;">
        <!-- Cash Total -->
        <div style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);">
            <div style="font-size: 13px; opacity: 0.9; margin-bottom: 5px;">üíµ CASH ACCOUNTS</div>
            <div style="font-size: 32px; font-weight: 700;">‚Çπ{{ "{:,.2f}".format(cash_total) }}</div>
        </div>
        
        <!-- Bank Total -->
        <div style="background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); color: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);">
            <div style="font-size: 13px; opacity: 0.9; margin-bottom: 5px;">üè¶ BANK ACCOUNTS</div>
            <div style="font-size: 32px; font-weight: 700;">‚Çπ{{ "{:,.2f}".format(bank_total) }}</div>
        </div>
        
        <!-- Petty Cash Total -->
        <div style="background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%); color: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);">
            <div style="font-size: 13px; opacity: 0.9; margin-bottom: 5px;">üí∞ PETTY CASH</div>
            <div style="font-size: 32px; font-weight: 700;">‚Çπ{{ "{:,.2f}".format(petty_cash_total) }}</div>
        </div>
        
        <!-- Employee Cash Total -->
        <div style="background: linear-gradient(135deg, #9c27b0 0%, #673ab7 100%); color: white; border-radius: 12px; padding: 25px; box-shadow: 0 4px 12px rgba(156, 39, 176, 0.3);">
            <div style="font-size: 13px; opacity: 0.9; margin-bottom: 5px;">üë∑ CASH WITH EMPLOYEES</div>
            <div style="font-size: 32px; font-weight: 700;">‚Çπ{{ "{:,.2f}".format(employee_cash_total) }}</div>
        </div>
    </div>

    <!-- Total Balance Card -->
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px; padding: 30px; margin-bottom: 25px; box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); text-align: center;">
        <div style="font-size: 14px; opacity: 0.9; margin-bottom: 8px;">TOTAL COMPANY BALANCE</div>
        <div style="font-size: 48px; font-weight: 800; margin-bottom: 5px;">‚Çπ{{ "{:,.2f}".format(total_balance) }}</div>
        <div style="font-size: 13px; opacity: 0.8;">(In Company Accounts Only)</div>
    </div>

    <!-- Account Details Table -->
    <div style="background: white; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); overflow: hidden;">
        <div style="padding: 20px; border-bottom: 2px solid #e9ecef;">
            <h3 style="margin: 0; font-size: 18px; font-weight: 700; color: #333;">üìã Account Details</h3>
        </div>
        <table style="width: 100%; border-collapse: collapse;">
            <thead style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <tr>
                    <th style="padding: 15px; text-align: left; font-weight: 600; font-size: 12px; text-transform: uppercase;">Account Name</th>
                    <th style="padding: 15px; text-align: left; font-weight: 600; font-size: 12px; text-transform: uppercase;">Type</th>
                    <th style="padding: 15px; text-align: left; font-weight: 600; font-size: 12px; text-transform: uppercase;">Bank Details</th>
                    <th style="padding: 15px; text-align: right; font-weight: 600; font-size: 12px; text-transform: uppercase;">Opening Balance (‚Çπ)</th>
                    <th style="padding: 15px; text-align: right; font-weight: 600; font-size: 12px; text-transform: uppercase;">Current Balance (‚Çπ)</th>
                    <th style="padding: 15px; text-align: center; font-weight: 600; font-size: 12px; text-transform: uppercase;">Status</th>
                </tr>
            </thead>
            <tbody>
                {% if accounts %}
                    {% for acc in accounts %}
                    <tr style="border-bottom: 1px solid #e9ecef;">
                        <td style="padding: 15px;">
                            <div style="font-weight: 600; color: #2c3e50;">
                                {% if acc[2] == 'cash' %}üíµ{% elif acc[2] == 'bank' %}üè¶{% else %}üí∞{% endif %}
                                {{ acc[1] }}
                            </div>
                        </td>
                        <td style="padding: 15px;">
                            <span style="padding: 4px 10px; background: {% if acc[2] == 'cash' %}#d4edda{% elif acc[2] == 'bank' %}#cce5ff{% else %}#fff3cd{% endif %}; color: {% if acc[2] == 'cash' %}#155724{% elif acc[2] == 'bank' %}#004085{% else %}#856404{% endif %}; border-radius: 12px; font-size: 11px; font-weight: 600; text-transform: uppercase;">
                                {{ acc[2] }}
                            </span>
                        </td>
                        <td style="padding: 15px;">
                            {% if acc[3] %}
                                <div style="font-size: 13px; color: #666;">{{ acc[3] }}</div>
                                {% if acc[4] %}
                                <div style="font-size: 12px; color: #999; margin-top: 2px;">A/C: {{ acc[4] }}</div>
                                {% endif %}
                            {% else %}
                                <span style="color: #999;">-</span>
                            {% endif %}
                        </td>
                        <td style="padding: 15px; text-align: right; color: #666;">
                            {{ "%.2f"|format(acc[5]) }}
                        </td>
                        <td style="padding: 15px; text-align: right;">
                            <span style="font-weight: 700; font-size: 16px; color: {% if acc[6] >= 0 %}#28a745{% else %}#dc3545{% endif %};">
                                {{ "{:,.2f}".format(acc[6]) }}
                            </span>
                        </td>
                        <td style="padding: 15px; text-align: center;">
                            {% if acc[7] %}
                                <span style="padding: 4px 10px; background: #667eea; color: white; border-radius: 12px; font-size: 10px; font-weight: 600;">DEFAULT</span>
                            {% else %}
                                <span style="color: #999;">-</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="6" style="padding: 40px; text-align: center; color: #999;">
                            No accounts found
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>

    <!-- Financial Summary -->
    <div style="background: white; border-radius: 12px; padding: 25px; margin-top: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
        <h3 style="margin: 0 0 20px 0; font-size: 18px; font-weight: 700; color: #333;">üìä Financial Summary</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            <div style="padding: 15px; background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%); border-radius: 8px;">
                <div style="font-size: 12px; color: #666; text-transform: uppercase; margin-bottom: 5px;">Total Accounts</div>
                <div style="font-size: 24px; font-weight: 700; color: #333;">{{ accounts|length }}</div>
            </div>
            <div style="padding: 15px; background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%); border-radius: 8px;">
                <div style="font-size: 12px; color: #666; text-transform: uppercase; margin-bottom: 5px;">Liquid Cash</div>
                <div style="font-size: 24px; font-weight: 700; color: #28a745;">‚Çπ{{ "{:,.2f}".format(cash_total) }}</div>
            </div>
            <div style="padding: 15px; background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%); border-radius: 8px;">
                <div style="font-size: 12px; color: #666; text-transform: uppercase; margin-bottom: 5px;">Bank Balance</div>
                <div style="font-size: 24px; font-weight: 700; color: #007bff;">‚Çπ{{ "{:,.2f}".format(bank_total) }}</div>
            </div>
            <div style="padding: 15px; background: linear-gradient(135deg, #f5f7fa 0%, #e8ecf1 100%); border-radius: 8px;">
                <div style="font-size: 12px; color: #666; text-transform: uppercase; margin-bottom: 5px;">Employee Cash</div>
                <div style="font-size: 24px; font-weight: 700; color: #9c27b0;">‚Çπ{{ "{:,.2f}".format(employee_cash_total) }}</div>
            </div>
        </div>
    </div>
</div>

<style>
@media print {
    .sidebar, .btn, .nav-header, button {
        display: none !important;
    }
    
    body {
        background: white !important;
    }
    
    .container-fluid {
        padding: 20px !important;
    }
}

table tbody tr:hover {
    background: #f8f9ff !important;
}
</style>

{% endblock %}

