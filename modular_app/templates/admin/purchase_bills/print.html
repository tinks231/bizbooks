<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purchase Bill - {{ bill.bill_number }}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 12pt;
            line-height: 1.6;
            color: #333;
            padding: 20px;
            background: white;
        }
        
        .print-container {
            max-width: 210mm; /* A4 width */
            margin: 0 auto;
            background: white;
        }
        
        .header {
            border-bottom: 3px solid #333;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .company-info {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .company-name {
            font-size: 24pt;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .company-details {
            font-size: 10pt;
            color: #666;
        }
        
        .bill-title {
            text-align: center;
            font-size: 18pt;
            font-weight: bold;
            background: #f8f9fa;
            padding: 10px;
            border: 2px solid #dee2e6;
            margin-bottom: 20px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .info-section {
            border: 1px solid #dee2e6;
            padding: 15px;
            background: #f8f9fa;
        }
        
        .info-section h3 {
            font-size: 12pt;
            margin-bottom: 10px;
            color: #495057;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 5px;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 3px 0;
            font-size: 10pt;
        }
        
        .info-label {
            font-weight: 600;
            color: #666;
        }
        
        .info-value {
            color: #333;
        }
        
        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        
        .items-table thead {
            background: #2c3e50;
            color: white;
        }
        
        .items-table th {
            padding: 12px 8px;
            text-align: left;
            font-size: 10pt;
            font-weight: 600;
        }
        
        .items-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #dee2e6;
            font-size: 10pt;
        }
        
        .items-table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .text-right {
            text-align: right;
        }
        
        .text-center {
            text-align: center;
        }
        
        .totals-section {
            float: right;
            width: 300px;
            margin-top: 20px;
        }
        
        .totals-table {
            width: 100%;
            border: 2px solid #dee2e6;
        }
        
        .totals-table tr {
            border-bottom: 1px solid #dee2e6;
        }
        
        .totals-table td {
            padding: 8px 12px;
            font-size: 11pt;
        }
        
        .totals-table td:first-child {
            font-weight: 600;
            color: #666;
        }
        
        .totals-table td:last-child {
            text-align: right;
            font-weight: bold;
        }
        
        .total-row {
            background: #2c3e50;
            color: white;
        }
        
        .total-row td {
            font-size: 13pt;
            font-weight: bold;
        }
        
        .notes-section {
            clear: both;
            margin-top: 40px;
            padding: 15px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
        }
        
        .notes-section h4 {
            font-size: 11pt;
            margin-bottom: 8px;
            color: #495057;
        }
        
        .notes-content {
            font-size: 10pt;
            color: #666;
            white-space: pre-wrap;
        }
        
        .footer {
            margin-top: 50px;
            padding-top: 20px;
            border-top: 2px solid #dee2e6;
            text-align: center;
            font-size: 9pt;
            color: #999;
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 10pt;
            font-weight: 600;
        }
        
        .status-draft {
            background: #ffc107;
            color: #000;
        }
        
        .status-approved {
            background: #28a745;
            color: white;
        }
        
        .status-unpaid {
            background: #dc3545;
            color: white;
        }
        
        .status-partial {
            background: #ff9800;
            color: white;
        }
        
        .status-paid {
            background: #28a745;
            color: white;
        }
        
        @media print {
            body {
                padding: 0;
            }
            
            .no-print {
                display: none !important;
            }
            
            .print-container {
                max-width: 100%;
            }
            
            @page {
                margin: 15mm;
            }
        }
        
        .print-button {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 24px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14pt;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        
        .print-button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>

<button class="print-button no-print" onclick="window.print()">üñ®Ô∏è Print / Save as PDF</button>

<div class="print-container">
    <!-- Header -->
    <div class="header">
        <div class="company-info">
            <div class="company-name">{{ tenant.company_name }}</div>
            <div class="company-details">
                {% if tenant.admin_phone %}üìû {{ tenant.admin_phone }}{% endif %}
                {% if tenant.admin_email %} ‚Ä¢ ‚úâÔ∏è {{ tenant.admin_email }}{% endif %}
            </div>
        </div>
    </div>
    
    <!-- Title -->
    <div class="bill-title">
        PURCHASE BILL
        <span class="status-badge status-{{ bill.status }}">{{ bill.status|upper }}</span>
        {% if bill.payment_status %}
        <span class="status-badge status-{{ bill.payment_status }}">{{ bill.payment_status|upper }}</span>
        {% endif %}
    </div>
    
    <!-- Info Grid -->
    <div class="info-grid">
        <!-- Bill Details -->
        <div class="info-section">
            <h3>üìã Bill Details</h3>
            <div class="info-row">
                <span class="info-label">Bill Number:</span>
                <span class="info-value">{{ bill.bill_number }}</span>
            </div>
            <div class="info-row">
                <span class="info-label">Bill Date:</span>
                <span class="info-value">{{ bill.bill_date.strftime('%d %b %Y') }}</span>
            </div>
            {% if bill.due_date %}
            <div class="info-row">
                <span class="info-label">Due Date:</span>
                <span class="info-value">{{ bill.due_date.strftime('%d %b %Y') }}</span>
            </div>
            {% endif %}
            {% if bill.reference_number %}
            <div class="info-row">
                <span class="info-label">Vendor Invoice #:</span>
                <span class="info-value">{{ bill.reference_number }}</span>
            </div>
            {% endif %}
        </div>
        
        <!-- Vendor Details -->
        <div class="info-section">
            <h3>üè¢ Vendor Details</h3>
            <div class="info-row">
                <span class="info-label">Name:</span>
                <span class="info-value">{{ bill.vendor_name }}</span>
            </div>
            {% if bill.vendor_phone %}
            <div class="info-row">
                <span class="info-label">Phone:</span>
                <span class="info-value">{{ bill.vendor_phone }}</span>
            </div>
            {% endif %}
            {% if bill.vendor_gstin %}
            <div class="info-row">
                <span class="info-label">GSTIN:</span>
                <span class="info-value">{{ bill.vendor_gstin }}</span>
            </div>
            {% endif %}
            {% if bill.vendor_state %}
            <div class="info-row">
                <span class="info-label">State:</span>
                <span class="info-value">{{ bill.vendor_state }}</span>
            </div>
            {% endif %}
        </div>
    </div>
    
    <!-- Items Table -->
    <table class="items-table">
        <thead>
            <tr>
                <th style="width: 5%;">#</th>
                <th style="width: 35%;">Item Name</th>
                <th style="width: 10%;">HSN</th>
                <th style="width: 10%;" class="text-center">Qty</th>
                <th style="width: 8%;">Unit</th>
                <th style="width: 12%;" class="text-right">Rate</th>
                <th style="width: 10%;" class="text-center">GST %</th>
                <th style="width: 15%;" class="text-right">Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for item in bill.items %}
            <tr>
                <td class="text-center">{{ loop.index }}</td>
                <td>{{ item.item_name }}</td>
                <td>{{ item.hsn_code or '-' }}</td>
                <td class="text-center">{{ item.quantity }}</td>
                <td>{{ item.unit }}</td>
                <td class="text-right">‚Çπ{{ "%.2f"|format(item.rate) }}</td>
                <td class="text-center">{{ item.gst_rate }}%</td>
                <td class="text-right">‚Çπ{{ "%.2f"|format(item.total_amount) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <!-- Totals -->
    <div class="totals-section">
        <table class="totals-table">
            <tr>
                <td>Subtotal:</td>
                <td>‚Çπ{{ "%.2f"|format(bill.subtotal) }}</td>
            </tr>
            {% if bill.cgst_amount > 0 %}
            <tr>
                <td>CGST:</td>
                <td>‚Çπ{{ "%.2f"|format(bill.cgst_amount) }}</td>
            </tr>
            <tr>
                <td>SGST:</td>
                <td>‚Çπ{{ "%.2f"|format(bill.sgst_amount) }}</td>
            </tr>
            {% endif %}
            {% if bill.igst_amount > 0 %}
            <tr>
                <td>IGST:</td>
                <td>‚Çπ{{ "%.2f"|format(bill.igst_amount) }}</td>
            </tr>
            {% endif %}
            {% if bill.other_charges > 0 %}
            <tr>
                <td>Other Charges:</td>
                <td>‚Çπ{{ "%.2f"|format(bill.other_charges) }}</td>
            </tr>
            {% endif %}
            <tr class="total-row">
                <td>TOTAL AMOUNT:</td>
                <td>‚Çπ{{ "%.2f"|format(bill.total_amount) }}</td>
            </tr>
        </table>
    </div>
    
    <!-- Notes -->
    {% if bill.notes or bill.terms_conditions %}
    <div class="notes-section">
        {% if bill.notes %}
        <h4>üìù Notes:</h4>
        <div class="notes-content">{{ bill.notes }}</div>
        {% endif %}
        
        {% if bill.terms_conditions %}
        <h4 style="margin-top: 15px;">üìú Terms & Conditions:</h4>
        <div class="notes-content">{{ bill.terms_conditions }}</div>
        {% endif %}
    </div>
    {% endif %}
    
    <!-- Footer -->
    <div class="footer">
        <p>This is a computer-generated document. No signature required.</p>
        <p>Generated on {{ now.strftime('%d %b %Y at %I:%M %p') }}</p>
    </div>
</div>

<script>
    // Auto-focus print dialog on load (optional)
    // window.onload = function() { window.print(); }
</script>

</body>
</html>

