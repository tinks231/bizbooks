{% extends "base_sidebar.html" %}
{% block title %}Edit Expense - {{ tenant.company_name }}{% endblock %}
{% block page_title %}Edit Expense{% endblock %}
{% block header_actions %}
<a href="{{ url_for('expenses.index') }}" class="btn btn-secondary">
    ← Back to Expenses
</a>
{% endblock %}
{% block content %}
<div class="card">
    <h3>Edit Expense</h3>
    <form method="POST">
        <div class="form-row">
            <div class="form-group">
                <label>Date *</label>
                <input type="date" name="expense_date" value="{{ expense.expense_date.strftime('%Y-%m-%d') }}" required>
            </div>
            <div class="form-group">
                <label>Category *</label>
                <select name="category_id" required>
                    {% for cat in categories %}
                    <option value="{{ cat.id }}" {% if cat.id == expense.category_id %}selected{% endif %}>{{ cat.name }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Amount (₹) *</label>
                <input type="number" name="amount" step="0.01" value="{{ expense.amount }}" required>
            </div>
            <div class="form-group">
                <label>Payment Method</label>
                <select name="payment_method">
                    <option value="Cash" {% if expense.payment_method == 'Cash' %}selected{% endif %}>Cash</option>
                    <option value="Bank Transfer" {% if expense.payment_method == 'Bank Transfer' %}selected{% endif %}>Bank Transfer</option>
                    <option value="UPI" {% if expense.payment_method == 'UPI' %}selected{% endif %}>UPI</option>
                    <option value="Card" {% if expense.payment_method == 'Card' %}selected{% endif %}>Card</option>
                    <option value="Cheque" {% if expense.payment_method == 'Cheque' %}selected{% endif %}>Cheque</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Vendor/Payee</label>
                <input type="text" name="vendor_name" value="{{ expense.vendor_name or '' }}">
            </div>
            <div class="form-group">
                <label>Reference Number</label>
                <input type="text" name="reference_number" value="{{ expense.reference_number or '' }}">
            </div>
        </div>
        <div class="form-group">
            <label>Description *</label>
            <textarea name="description" rows="2" required>{{ expense.description }}</textarea>
        </div>
        <button type="submit" class="btn btn-primary">Update Expense</button>
        <a href="{{ url_for('expenses.index') }}" class="btn btn-secondary">Cancel</a>
    </form>
</div>
{% endblock %}
